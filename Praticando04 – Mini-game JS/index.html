<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <title>Document</title>
</head>

<body>
    <div class="container">
        <h1>Praticando 4 - Mini-game JS</h1>
        <h2><u>Instruções: </u></h2>
        <ol>
            <li>Clique em um dos Quadrados Coloridos</li>
            <li>Depois use as teclas <span class="let"> W </span> <span class="let"> A </span> <span class="let"> S
                </span> <span class="let"> D </span> para moviementar os elementos para cima, esquerda, baixo e direita
                respectivamente</li>
        </ol>
        <div class="text-center">
            <img src="wasd.jpg" alt="teclas">
        </div>

        <div>
            <div class="quadrado" id="quadvermelho" onclick="select('vermelho')"></div>
            <div class="quadrado" id="quadazul" onclick="select('azul')"></div>
            <div class="quadrado" id="quadverde" onclick="select('verde')"></div>
        </div>
    </div>
    <style>
        .let{
            background-color: rgba(255, 207, 119, 0.542);
            margin-right: 0.2em;
            padding-left: 0.3em;
        }
        .quadrado {
            position: absolute;
            border: 0.5vw black solid;
            width: 10vw;
            top: 30vh;
            height: 10vw;
            margin: 2vw;
        }

        #quadvermelho {
            left: 5vw;
            background-color: red;
        }

        #quadazul {
            left: 17vw;
            background-color: blue;
        }

        #quadverde {
            left: 29vw;
            background-color: green;
        }
    </style>
    <script>
        let cor_sel = "";
        let selecionado = false;
        let elemento = null;
        let y = 40;
        let x = 0
        function select(cor) {
            if (selecionado) {
                if (cor_sel == cor) {
                    elemento_selecionado();
                    return;
                }
                alert("Já foi escolhido outro quadrado!")
                return;
            }
            cor_sel = cor;
            elemento_selecionado();
            return;
        }
        function elemento_selecionado() {
            if (selecionado) {
                selecionado = false;
                elemento.style.borderColor = "black";
                elemento.style.top = "30vh"
                voltaLugar(true);
                return;
            }
            elemento = document.getElementById("quad" + cor_sel);
            elemento.style.borderColor = "yellow";
            selecionado = true;
            voltaLugar(false);
        }
        function voltaLugar(muda) {
            y = 30;
            switch (cor_sel) {
                case "vermelho":
                    if (muda) {
                        elemento.style.left = "5vw";
                    }
                    x = 5;
                    return;
                case "azul":
                    if (muda) {
                        elemento.style.left = "17vw";
                    }
                    x = 17;
                    return;
                case "verde":
                    x = 29;
                    if (muda) {
                        elemento.style.left = "29vw";
                    }
                    return;
            }
        }
        document.addEventListener('keydown', function () {
            console.log("pressionou")
            elemento = document.getElementById("quad" + cor_sel);
            if (selecionado) {
                switch (event.key) {
                    case 'w':
                        y--;
                        console.log("pressionou w")
                        break; w
                    case 'a':
                        x--;
                        console.log("pressionou a")
                        break;
                    case 's':
                        y++;
                        console.log("pressionou s")
                        break;
                    case 'd':
                        x++;
                        console.log("pressionou d")
                        break;
                }
                let eixoy = y + "vh";
                let eixox = x + "vw";
                elemento.style.top = eixoy;
                console.log(eixoy)
                console.log(eixox)
                elemento.style.left = eixox;
                return;
            }
        }
        )
    </script>
</body>

</html>